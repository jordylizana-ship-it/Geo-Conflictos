<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="/icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoConflictos - Mapa de Conflictos Socioambientales</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3366cc;
            --primary-dark: #2a52a2;
            --primary-light: #eaf3ff;
            --accent: #e63946;
            --light-gray: #f8f9fa;
            --card-bg: #ffffff;
            --text-dark: #202122;
            --text-light: #54595d;
            --border-color: #dee2e6;
            --green: #00af89;
            --orange: #f58d00;
            --space-lg: 1.5rem;
            --space-md: 1.25rem;
            --space-sm: 0.75rem;
        }
        
        [v-cloak] { display: none; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        html, body { background-color: var(--light-gray); color: var(--text-dark); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; width: 100%; overflow-x: hidden; }
        html.tutorial-active, body.tutorial-active { overflow: hidden; }
        #app { display: flex; flex-direction: column; min-height: 100vh; }
        
        .main-container { display: flex; flex-direction: column; flex-grow: 1; padding: var(--space-lg); gap: var(--space-lg); width: 100%; max-width: 1400px; margin: 0 auto; }

        .header {
            background: #ffffff;
            padding: var(--space-sm) var(--space-lg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        .header .logo-container { height: 50px; flex-shrink: 0; }
        .header .logo-container img { height: 100%; width: auto; object-fit: contain; }
        .header .title-group { display: flex; flex-direction: column; }
        .header .logo-title { font-size: 1.4rem; font-weight: 700; color: var(--text-dark); line-height: 1.2; }
        .header .logo-subtitle { font-size: 0.9rem; color: var(--text-light); }
        
        .map-and-panels-wrapper { display: flex; flex-grow: 1; gap: var(--space-lg); min-height: 600px; margin-top: 1rem; }
        .filters-panel { width: 280px; background-color: var(--card-bg); border-radius: 0.75rem; padding: var(--space-md); overflow-y: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.05); flex-shrink: 0; border: 1px solid var(--border-color); }
        .filters-panel h2 { font-size: 1.1rem; margin-bottom: var(--space-md); color: var(--primary); display: flex; align-items: center; gap: 0.5rem; }
        
        .filter-group { margin-bottom: var(--space-md); }
        .filter-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dark); font-size: 0.9rem; }
        .input-wrapper { position: relative; }
        .input-wrapper .icon { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-light); pointer-events: none; transition: color 0.2s; }
        .input-wrapper input, .input-wrapper select { appearance: none; -webkit-appearance: none; -moz-appearance: none; background-color: var(--light-gray); border: 2px solid var(--light-gray); border-radius: 0.5rem; padding: 0.8rem; padding-left: 2.8rem; width: 100%; font-size: 0.95rem; transition: border-color 0.2s, box-shadow 0.2s; }
        .input-wrapper select:not([multiple]) {
            background-image: url('data:image/svg+xml;utf8,<svg fill="%2354595d" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1.2rem;
        }
        .input-wrapper input:focus, .input-wrapper select:focus { outline: none; border-color: var(--primary); background-color: #fff; }
        .input-wrapper input:focus + .icon, .input-wrapper select:focus + .icon { color: var(--primary); }
        .load-button { width: 100%; padding: 0.8rem; border: none; background-color: var(--primary); color: white; font-weight: 600; border-radius: 0.5rem; cursor: pointer; transition: background-color 0.2s, transform 0.2s; }
        .load-button:hover { background-color: var(--primary-dark); transform: translateY(-2px); }
        
        .custom-select-container { position: relative; }
        .custom-select-display { background-color: var(--light-gray); border: 2px solid var(--light-gray); border-radius: 0.5rem; padding: 0.5rem; width: 100%; min-height: 48px; cursor: pointer; display: flex; flex-wrap: wrap; gap: 0.4rem; align-items: center; }
        .custom-select-display.open { border-color: var(--primary); }
        .country-tag { background-color: var(--primary-light); color: var(--primary-dark); padding: 0.25rem 0.6rem; border-radius: 0.25rem; font-size: 0.8rem; font-weight: 500; display: flex; align-items: center; gap: 0.4rem; }
        .country-tag .remove-tag { cursor: pointer; font-weight: bold; }
        .placeholder-text { color: var(--text-light); padding-left: 0.3rem; }
        .country-dropdown { position: absolute; top: 105%; left: 0; width: 100%; background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); z-index: 1002; padding: 0.5rem; }
        .country-search { width: 100%; padding: 0.7rem; border: 1px solid var(--border-color); border-radius: 0.25rem; margin-bottom: 0.5rem; }
        .country-list-actions { padding-bottom: 0.5rem; margin-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); }
        .country-list-actions button { width: 100%; padding: 0.5rem; border: none; background-color: var(--primary-light); color: var(--primary-dark); font-weight: 600; border-radius: 0.25rem; cursor: pointer; transition: background-color 0.2s; }
        .country-list-actions button:hover { background-color: #d8e6ff; }
        .country-list { max-height: 200px; overflow-y: auto; }
        .country-list-item { display: flex; align-items: center; padding: 0.6rem 0.5rem; cursor: pointer; border-radius: 0.25rem; }
        .country-list-item:hover { background-color: var(--light-gray); }
        .country-list-item input { margin-right: 0.7rem; }
        
        .map-area { flex-grow: 1; position: relative; z-index: 1; background-color: var(--card-bg); border-radius: 0.75rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid var(--border-color); overflow: hidden; }
        #map-container { width: 100%; height: 100%; }
        .right-panel-wrapper { position: relative; width: 360px; flex-shrink: 0; z-index: 100; }
        .details-panel { width: 100%; height: 100%; background-color: var(--card-bg); box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: absolute; right: 0; top: 0; transform: translateX(105%); opacity: 0; pointer-events: none; transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out; display: none; flex-direction: column; border-radius: 0.75rem; border: 1px solid var(--border-color); }
        .details-panel.active { transform: translateX(0); opacity: 1; pointer-events: auto; display: flex; }
        .details-header { padding: var(--space-md); background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; position: relative; flex-shrink: 0; border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem; }
        .details-header h2 { font-size: 1.3rem; font-weight: 700; margin-right: 2rem; }
        .details-header span { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 99px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
        .close-btn { position: absolute; top: 0.8rem; right: 0.8rem; background: none; border: none; font-size: 1.8rem; color: rgba(255,255,255,0.8); cursor: pointer; line-height: 1; transition: color 0.2s; }
        .close-btn:hover { color: white; }
        .details-body { padding: var(--space-md); overflow-y: auto; flex-grow: 1; }
        .action-buttons { display: flex; flex-direction: column; gap: 0.75rem; margin-top: var(--space-md); border-top: 1px solid var(--border-color); padding-top: var(--space-md); }
        .action-btn { display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.8rem; border-radius: 0.5rem; border: none; font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 0.9rem; }
        .btn-wikidata { background-color: var(--primary); color: white; }
        .btn-wikipedia { background-color: var(--green); color: white; }
        .action-btn:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .stats-panel-wrapper { width: 100%; height: 100%; background-color: var(--card-bg); border-radius: 0.75rem; padding: var(--space-md); overflow-y: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.05); flex-shrink: 0; border: 1px solid var(--border-color); }
        .stats-panel h2 { font-size: 1.1rem; margin-bottom: var(--space-md); color: var(--primary); display: flex; align-items: center; gap: 0.5rem; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md); margin-bottom: var(--space-lg); }
        .stat-card { display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background-color: var(--card-bg); border-radius: 0.5rem; border-left: 4px solid; }
        .stat-icon { font-size: 1.2rem; flex-shrink: 0; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; }
        .stat-info { display: flex; flex-direction: column; align-items: flex-start; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--text-dark); }
        .stat-label { font-size: 0.8rem; color: var(--text-light); }
        .stat-total { border-color: var(--primary); }
        .stat-total .stat-icon { background-color: var(--primary); }
        .stat-active { border-color: var(--accent); }
        .stat-active .stat-icon { background-color: var(--accent); }
        .stat-latent { border-color: var(--orange); }
        .stat-latent .stat-icon { background-color: var(--orange); }
        .stat-resolved { border-color: var(--green); }
        .stat-resolved .stat-icon { background-color: var(--green); }

        .sector-chart { margin-top: var(--space-md); }
        .sector-item { display: flex; align-items: center; margin-bottom: 1.2rem; }
        .sector-icon-wrapper { width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: var(--space-sm); flex-shrink: 0; }
        .sector-icon { color: white; font-size: 1rem; }
        .sector-content { flex: 1; display: flex; flex-direction: column; }
        .sector-label { font-size: 0.9rem; font-weight: 600; color: var(--text-dark); margin-bottom: 0.3rem; }
        .sector-bar-wrapper { display: flex; align-items: center; width: 100%; }
        .sector-bar-container { flex-grow: 1; background-color: #e0e0e0; border-radius: 5px; height: 8px; overflow: hidden; margin-right: 0.5rem; }
        .sector-bar { height: 100%; border-radius: 5px; transition: width 0.8s ease-out; }
        .percentage-value { font-weight: 600; color: var(--text-dark); font-size: 0.85rem; min-width: 35px; text-align: right; }
        
        .details-status-banner { padding: var(--space-sm) var(--space-md); margin-bottom: var(--space-lg); border-radius: 0.5rem; display: flex; align-items: center; gap: var(--space-sm); font-weight: 600; font-size: 1rem; border-left-width: 5px; border-left-style: solid; }
        .details-status-banner .icon { font-size: 1.2rem; }
        .status-Activo { background-color: hsl(4, 79%, 96%); color: hsl(4, 79%, 40%); border-color: hsl(4, 79%, 60%); }
        .status-Latente { background-color: hsl(35, 100%, 96%); color: hsl(35, 100%, 35%); border-color: hsl(35, 100%, 50%); }
        .status-Resuelto { background-color: hsl(162, 100%, 96%); color: hsl(162, 100%, 25%); border-color: hsl(162, 100%, 35%); }
        .status-Desconocido { background-color: hsl(210, 8%, 96%); color: hsl(210, 8%, 40%); border-color: hsl(210, 8%, 60%); }
        .details-description { font-size: 0.95rem; line-height: 1.7; color: var(--text-dark); margin-bottom: var(--space-lg); border-bottom: 1px solid var(--border-color); padding-bottom: var(--space-lg); }
        .details-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg); }
        .info-item { display: flex; align-items: flex-start; gap: var(--space-sm); }
        .info-item .icon { font-size: 1.1rem; color: var(--primary); margin-top: 0.15rem; }
        .info-item .content label { font-size: 0.8rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.2rem; display: block; }
        .info-item .content .value { font-size: 0.95rem; font-weight: 500; color: var(--text-dark); }
        
        .tutorial-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: 10000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .tutorial-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        .tutorial-highlight-box {
            position: fixed; 
            border-radius: 0.75rem;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);
            z-index: 10001;
            transition: all 0.4s ease-in-out;
            pointer-events: none;
        }
        .tutorial-popup {
            position: fixed;
            background-color: var(--card-bg);
            padding: var(--space-lg);
            border-radius: 0.75rem;
            border-top: 4px solid var(--primary);
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            width: 320px;
            z-index: 10002;
            transition: all 0.4s ease-in-out;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .tutorial-popup h3 { 
            color: var(--primary); 
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.2rem;
        }
        .tutorial-popup p { font-size: 0.95rem; color: var(--text-light); line-height: 1.6; }
        .tutorial-nav { margin-top: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .tutorial-dots { display: flex; gap: 0.5rem; }
        .dot { width: 10px; height: 10px; background-color: var(--border-color); border-radius: 50%; transition: background-color 0.3s; }
        .dot.active { background-color: var(--primary); }
        .tutorial-nav button { background: var(--primary); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 0.5rem; cursor: pointer; font-weight: 600; transition: all 0.2s ease; }
        .tutorial-nav button:hover:not(:disabled) { background-color: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .tutorial-nav button:disabled { background-color: var(--text-light); cursor: not-allowed; }

        .welcome-modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 11000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .welcome-modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        .welcome-modal {
            background: white;
            padding: 2.5rem;
            border-radius: 1rem;
            width: 90%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .welcome-modal-overlay.active .welcome-modal {
            transform: scale(1);
        }
        .welcome-modal .icon {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
            line-height: 1;
        }
        .welcome-modal h2 {
            font-family: 'EB Garamond', serif;
            font-size: 2.2rem;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
        }
        .welcome-modal p {
            color: var(--text-light);
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 2rem;
        }
        .welcome-modal button {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 0.9rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(51, 102, 204, 0.4);
        }
        .welcome-modal button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(51, 102, 204, 0.5);
        }

        footer { background-color: white; border-top: 1px solid var(--border-color); padding: var(--space-md) 0; flex-shrink: 0; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        .footer-container { max-width: 1400px; margin: 0 auto; padding: 0 var(--space-lg); text-align: center; color: var(--text-light); }
        .footer-logos { display: flex; justify-content: center; align-items: center; gap: var(--space-lg); margin-bottom: var(--space-sm); }
        .footer-logos img { height: 40px; width: auto; }
        .footer-text { font-size: 0.9rem; margin-bottom: 0.5rem; }
        .footer-copyright { font-size: 0.8rem; }
        .loading { display: flex; justify-content: center; align-items: center; height: 100%; font-size: 1.2rem; color: var(--text-light); position: absolute; width: 100%; background-color: rgba(255,255,255,0.7); z-index: 10; border-radius: 0.75rem; }
        .loading::after { content: ""; width: 24px; height: 24px; border: 3px solid var(--border-color); border-top: 3px solid var(--primary); border-radius: 50%; margin-left: 12px; animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .message { padding: var(--space-sm) var(--space-md); text-align: center; background-color: var(--primary-light); border-radius: 0.75rem; color: var(--primary); border-left: 4px solid var(--primary); position: absolute; top: 10px; left: 50%; transform: translateX(-50%); z-index: 1001; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        @media (max-width: 1200px) { .map-and-panels-wrapper { flex-direction: column; height: auto; min-height: unset; } .filters-panel, .right-panel-wrapper, .map-area { width: 100%; height: auto; } .map-area { height: 60vh; min-height: 450px; } .details-panel { position: relative; transform: none; opacity: 1; pointer-events: auto; } }
        @media (max-width: 768px) { .main-container { padding: var(--space-sm); } .header { flex-direction: column; gap: 0.5rem; text-align: center; } }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <!-- El contenido se renderizar√° aqu√≠ por Vue -->
    </div>

    <!-- Carga de Leaflet ANTES de la app Vue -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <!-- Carga de Vue 3 -->
    <script type="importmap">
    {
        "imports": {
            "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
        }
    }
    </script>

    <script type="module">
        import { createApp, ref, reactive, onMounted, onBeforeUnmount, watch, computed, nextTick } from 'vue';

        // La plantilla HTML de la aplicaci√≥n completa
        const AppTemplate = `
            <div :class="['tutorial-overlay', { active: isTutorialActive }]">
                <div v-if="isTutorialActive">
                    <div class="tutorial-highlight-box" :style="tutorialHighlightStyle"></div>
                    <div class="tutorial-popup" :style="tutorialPopupStyle">
                        <h3><i class="fas fa-route"></i> {{ currentTutorialStep.title }}</h3>
                        <p>{{ currentTutorialStep.text }}</p>
                        <div class="tutorial-nav">
                            <div class="tutorial-dots">
                                <span v-for="(step, index) in tutorialSteps" :key="index" class="dot" :class="{ active: index === tutorialStep }"></span>
                            </div>
                            <div>
                                <button @click="prevStep" :disabled="tutorialStep === 0">Anterior</button>
                                <button @click="nextStep" v-if="tutorialStep < tutorialSteps.length - 1">Siguiente</button>
                                <button @click="finishTutorial" v-else>Finalizar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div :class="['welcome-modal-overlay', { active: showWelcomeModal }]">
                <div class="welcome-modal">
                    <div class="icon">üó∫Ô∏è</div>
                    <h2>Exploraci√≥n Iniciada</h2>
                    <p>¬°Todo listo! Ya puedes navegar, filtrar y descubrir los conflictos socioambientales. ¬°Que tu curiosidad sea tu gu√≠a!</p>
                    <button @click="closeWelcomeModal">Comenzar a Explorar</button>
                </div>
            </div>

            <header class="header">
                <div class="logo-container">
                    <img src="/logo.png" alt="Logo Wikimedia Chile">
                </div>
                <div class="title-group">
                    <h1 class="logo-title">GeoConflictos</h1>
                    <p class="logo-subtitle">Mapa de conflictos socioambientales</p>
                </div>
            </header>

            <div class="main-container">
                <div class="map-and-panels-wrapper">
                    <div id="filters-panel" class="filters-panel">
                        <h2><i class="fas fa-filter"></i> Filtros</h2>
                        <div class="filter-group">
                            <label for="country-filter">Pa√≠s</label>
                             <div class="custom-select-container" ref="countrySelectContainer">
                                 <div class="custom-select-display" @click="isCountryDropdownOpen = !isCountryDropdownOpen" :class="{ open: isCountryDropdownOpen }">
                                     <span v-if="filters.country.length === 0" class="placeholder-text">Seleccionar pa√≠ses...</span>
                                     <div v-for="countryId in filters.country" :key="countryId" class="country-tag">
                                         <span>{{ getCountryName(countryId) }}</span>
                                         <span class="remove-tag" @click.stop="removeCountry(countryId)">&times;</span>
                                     </div>
                                 </div>
                                 <div class="country-dropdown" v-show="isCountryDropdownOpen">
                                     <input type="text" class="country-search" v-model="countrySearchTerm" placeholder="Buscar pa√≠s...">
                                     <div class="country-list-actions">
                                        <button @click.stop="toggleSelectAllCountries">{{ selectAllButtonText }}</button>
                                     </div>
                                     <div class="country-list">
                                         <label v-for="country in filteredCountries" :key="country.id" class="country-list-item">
                                             <input type="checkbox" :value="country.id" v-model="filters.country">
                                             {{ country.name }}
                                         </label>
                                     </div>
                                 </div>
                             </div>
                        </div>
                        <div class="filter-group">
                            <button class="load-button" @click="onCountryChange">Ver Conflictos</button>
                        </div>
                        <div class="filter-group">
                            <label for="search">Buscar por nombre</label>
                            <div class="input-wrapper">
                                <input type="text" id="search" placeholder="Ej: Pascua Lama..." v-model="filters.search">
                                <i class="fas fa-search icon"></i>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label for="region-filter">Regi√≥n</label>
                            <div class="input-wrapper">
                                <select id="region-filter" v-model="filters.region" :disabled="filterOptions.regions.length === 0">
                                     <option value="">Todas las regiones</option>
                                     <option v-for="region in filterOptions.regions" :key="region" :value="region">{{ region }}</option>
                                </select>
                                <i class="fas fa-map-marked-alt icon"></i>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label for="type-filter">Sector</label>
                            <div class="input-wrapper">
                               <select id="type-filter" v-model="filters.sector" :disabled="filterOptions.sectors.length === 0">
                                   <option value="">Todos los sectores</option>
                                   <option v-for="sector in filterOptions.sectors" :key="sector" :value="sector">{{ sector }}</option>
                               </select>
                               <i class="fas fa-industry icon"></i>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label for="status-filter">Estado</label>
                            <div class="input-wrapper">
                                <select id="status-filter" v-model="filters.status">
                                    <option value="">Todos los estados</option>
                                    <option value="Activo">Activo</option>
                                    <option value="Latente">Latente</option>
                                    <option value="Resuelto">Resuelto</option>
                                    <option value="Desconocido">Desconocido</option>
                                </select>
                                <i class="fas fa-lightbulb icon"></i>
                            </div>
                        </div>
                         <div class="filter-group">
                            <label for="date-filter">Fecha de inicio</label>
                            <div class="input-wrapper">
                               <input type="date" id="date-filter" v-model="filters.date">
                               <i class="fas fa-calendar-alt icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="map-area" id="map-area">
                        <div id="map-container" ref="mapContainer"></div>
                        <div class="loading" v-if="isLoading">
                            Consultando Wikidata...
                        </div>
                    </div>
                    
                     <div class="right-panel-wrapper" id="stats-panel">
                         <div class="stats-panel-wrapper" v-show="!activeConflict">
                             <div class="stats-panel">
                                 <h2><i class="fas fa-chart-bar"></i> Estad√≠sticas</h2>
                                 <div class="stats-grid">
                                     <div class="stat-card stat-total">
                                         <div class="stat-icon"><i class="fas fa-globe-americas"></i></div>
                                         <div class="stat-info"><div class="stat-value">{{ stats.total }}</div><div class="stat-label">Total</div></div>
                                     </div>
                                     <div class="stat-card stat-active">
                                         <div class="stat-icon"><i class="fas fa-fire-alt"></i></div>
                                         <div class="stat-info"><div class="stat-value">{{ stats.active }}</div><div class="stat-label">Activos</div></div>
                                     </div>
                                     <div class="stat-card stat-latent">
                                         <div class="stat-icon"><i class="fas fa-hourglass-half"></i></div>
                                         <div class="stat-info"><div class="stat-value">{{ stats.latent }}</div><div class="stat-label">Latentes</div></div>
                                     </div>
                                     <div class="stat-card stat-resolved">
                                         <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                                         <div class="stat-info"><div class="stat-value">{{ stats.resolved }}</div><div class="stat-label">Resueltos</div></div>
                                     </div>
                                 </div>
                                 <h3><i class="fas fa-industry"></i> Distribuci√≥n por Sector</h3>
                                 <div class="sector-chart">
                                     <div class="sector-item" v-for="sector in stats.sectors" :key="sector.name">
                                         <div class="sector-icon-wrapper" :style="{ backgroundColor: sector.color }"><i :class="sector.icon" class="sector-icon"></i></div>
                                         <div class="sector-content">
                                             <div class="sector-label">{{ sector.name }}</div>
                                             <div class="sector-bar-wrapper">
                                                 <div class="sector-bar-container">
                                                     <div class="sector-bar" :style="{ width: sector.percentage + '%', backgroundColor: sector.color }"></div>
                                                 </div>
                                                 <span class="percentage-value">{{ sector.percentage }}%</span>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                               </div>
                         </div>

                         <div class="details-panel" :class="{ active: activeConflict }">
                             <div v-if="activeConflict">
                                 <div class="details-header">
                                     <button class="close-btn" @click="activeConflict = null">&times;</button>
                                     <h2>{{ activeConflict.name }}</h2>
                                     <div>
                                         <span :style="{ backgroundColor: getSectorColor(activeConflict.sector) }">{{ activeConflict.sector }}</span>
                                     </div>
                                 </div>
                                 <div class="details-body">
                                     <div :class="['details-status-banner', 'status-' + activeConflict.status]">
                                         <i :class="['fas', getStatusInfo(activeConflict.status).icon, 'icon']"></i>
                                         <span>{{ getStatusInfo(activeConflict.status).text }}</span>
                                     </div>
                                     <div class="details-description" v-html="activeConflict.description"></div>
                                     <div class="details-info-grid">
                                         <div class="info-item">
                                             <i class="fas fa-map-marked-alt icon"></i>
                                             <div class="content">
                                                 <label>Ubicaci√≥n</label>
                                                 <span class="value">{{ activeConflict.region }} <span v-if="activeConflict.isImprecise">(aprox.)</span></span>
                                             </div>
                                         </div>
                                         <div class="info-item">
                                             <i class="fas fa-calendar-alt icon"></i>
                                             <div class="content">
                                                 <label>Fecha de inicio</label>
                                                 <span class="value">{{ formatDate(activeConflict.startDate) }}</span>
                                             </div>
                                         </div>
                                     </div>
                                     <div class="action-buttons">
                                         <button class="action-btn btn-wikidata" @click="openLink('https://www.wikidata.org/wiki/' + activeConflict.id)"><i class="fas fa-database"></i> Ver en Wikidata</button>
                                         <button v-if="activeConflict.wikipediaUrl" class="action-btn btn-wikipedia" @click="openLink(activeConflict.wikipediaUrl)"><i class="fab fa-wikipedia-w"></i> Ver en Wikipedia</button>
                                     </div>
                                 </div>
                               </div>
                         </div>
                       </div>
                </div>
            </div>
            
            <footer>
                <div class="footer-container">
                    <div class="footer-logos">
                        <a href="https://www.wikimedia.cl/" target="_blank" rel="noopener noreferrer"><img src="/wikiemdia foundation logo.webp" alt="Logo Wikimedia Chile"></a>
                        <a href="https://www.wikidata.org/" target="_blank" rel="noopener noreferrer"><img src="/wikidata logo.png" alt="Logo Wikidata"></a>
                    </div>
                    <p class="footer-text">Desarrollado con datos de Wikidata, un proyecto de la Fundaci√≥n Wikimedia.</p>
                    <p class="footer-copyright">¬© {{ new Date().getFullYear() }} Wikimedia Chile. Contenido disponible bajo licencia CC BY-SA 4.0.</p>
                </div>
            </footer>
        `;

        createApp({
            template: AppTemplate,
            setup() {
                // --- DEFINICIONES Y CONSTANTES ---
                const QID_CHILE = "Q298";
                const sectorKeywords = { 'Minero': ["minero", "minera", "mina", "pascua lama", "casale", "collahuasi", "codelco", "cobre", "litio"], 'Agua': ["agua", "h√≠drico", "represa", "r√≠o", "lago", "hidroel√©ctrica", "hidroays√©n", "escasez", "glaciar", "sequ√≠a", "embalse", "mar", "oc√©ano", "costa", "puerto"], 'Forestal': ["forestal", "celulosa", "arauco", "cmpc", "bosque", "√°rbol", "plantaci√≥n"], 'Industrial': ["industrial", "contaminaci√≥n", "quintero", "refiner√≠a", "plomo", "pesquero", "salmonera", "derrame", "empresa"], 'Energ√©tico': ["energ√©tico", "termoel√©ctrica", "central", "carb√≥n", "e√≥lico", "el√©ctrica", "solar", "gas", "petr√≥leo"], 'Protesta Social': ["protesta", "social", "estallido", "huelga", "disputa", "movilizaci√≥n", "comunidad", "vecinos", "mapuche"] };
                const sectorColors = { 'Minero': "#ff9800", 'Agua': "#2196f3", 'Forestal': "#4caf50", 'Industrial': "#f44336", 'Energ√©tico': "#9c27b0", 'Protesta Social': "#e91e63", 'Otro': "#607d8b" };
                const sectorIcons = { 'Minero': "fas fa-mountain", 'Agua': "fas fa-water", 'Forestal': "fas fa-tree", 'Industrial': "fas fa-industry", 'Energ√©tico': "fas fa-bolt", 'Protesta Social': "fas fa-users", 'Otro': "fas fa-question-circle" };
                const statusInfo = { 'Activo': { icon: 'fa-fire-alt', text: 'Conflicto Activo' }, 'Latente': { icon: 'fa-hourglass-half', text: 'Conflicto Latente' }, 'Resuelto': { icon: 'fa-check-circle', text: 'Conflicto Resuelto' }, 'Desconocido': { icon: 'fa-question-circle', text: 'Estado Desconocido' } };

                // --- ESTADO REACTIVO DE LA APLICACI√ìN ---
                const isLoading = ref(false);
                const countries = ref([]);
                const allConflicts = ref([]);
                const activeConflict = ref(null);
                const filters = reactive({ country: [QID_CHILE], search: '', region: '', sector: '', status: '', date: '' });
                const isCountryDropdownOpen = ref(false);
                const countrySearchTerm = ref('');
                const countrySelectContainer = ref(null);
                const isTutorialActive = ref(false);
                const tutorialStep = ref(0);
                const showWelcomeModal = ref(false);
                const tutorialSteps = [
                    { element: '#filters-panel', title: 'Panel de Filtros', text: 'Aqu√≠ puedes filtrar los conflictos por pa√≠s, nombre, sector y m√°s. Selecciona uno o varios pa√≠ses y presiona "Ver Conflictos" para empezar.' },
                    { element: '#map-area', title: 'Mapa Interactivo', text: 'Los conflictos aparecer√°n aqu√≠. Los puntos con borde discontinuo indican una ubicaci√≥n aproximada. Haz clic en un punto para ver m√°s detalles.' },
                    { element: '#stats-panel', title: 'Estad√≠sticas y Detalles', text: 'Este panel muestra un resumen de los conflictos visualizados. Al seleccionar un conflicto en el mapa, aqu√≠ ver√°s su informaci√≥n detallada.' }
                ];
                const tutorialPopupStyle = ref({});
                const tutorialHighlightStyle = ref({});
                let map = null;
                let markers = null;
                const mapContainer = ref(null);

                // --- PROPIEDADES COMPUTADAS ---
                const filteredConflicts = computed(() => {
                    if (allConflicts.value.length === 0) return [];
                    return allConflicts.value.filter(c => 
                        (!filters.region || `${c.countryName} - ${c.region}` === filters.region) &&
                        (!filters.sector || c.sector === filters.sector) &&
                        (!filters.status || c.status === filters.status) &&
                        (!filters.date || (c.startDate && new Date(c.startDate) >= new Date(filters.date))) &&
                        (!filters.search || c.name.toLowerCase().includes(filters.search.toLowerCase()))
                    );
                });

                const stats = computed(() => {
                    const data = filteredConflicts.value;
                    const sectorsMap = {};
                    data.forEach(c => { sectorsMap[c.sector] = (sectorsMap[c.sector] || 0) + 1; });
                    
                    const sortedSectors = Object.entries(sectorsMap).sort(([, a], [, b]) => b - a).map(([name, count]) => ({
                        name,
                        count,
                        percentage: data.length > 0 ? Math.round((count / data.length) * 100) : 0,
                        color: sectorColors[name] || '#607d8b',
                        icon: sectorIcons[name] || 'fas fa-question-circle'
                    }));

                    return {
                        total: data.length,
                        active: data.filter(c => c.status === 'Activo').length,
                        latent: data.filter(c => c.status === 'Latente').length,
                        resolved: data.filter(c => c.status === 'Resuelto').length,
                        sectors: sortedSectors
                    };
                });

                const filterOptions = computed(() => {
                    const regions = [...new Set(allConflicts.value.filter(c => c.region && c.region !== 'No especificada' && c.countryName).map(c => `${c.countryName} - ${c.region}`))].sort();
                    const sectors = [...new Set(allConflicts.value.map(c => c.sector).filter(Boolean))].sort();
                    return { regions, sectors };
                });

                const filteredCountries = computed(() => {
                    if (!countrySearchTerm.value) return countries.value;
                    return countries.value.filter(c => c.name.toLowerCase().includes(countrySearchTerm.value.toLowerCase()));
                });
                
                const currentTutorialStep = computed(() => tutorialSteps[tutorialStep.value]);

                const selectAllButtonText = computed(() => {
                    if (countries.value.length === 0) return 'Seleccionar todos';
                    return filters.country.length === countries.value.length ? 'Deseleccionar todos' : 'Seleccionar todos';
                });

                // --- M√âTODOS ---
                const fetchData = async (countryQIDs) => {
                    if (!countryQIDs || countryQIDs.length === 0) {
                        allConflicts.value = [];
                        return;
                    }
                    isLoading.value = true;
                    activeConflict.value = null;
                    const countriesFilter = `VALUES ?country { ${countryQIDs.map(id => `wd:${id}`).join(' ')} }`;
                    const sparqlQuery = `SELECT ?conflict ?conflictLabel ?description ?coords ?startDate ?endDate ?adminEntity ?adminEntityLabel ?wikipediaUrl ?countryLabel WHERE { ${countriesFilter} ?conflict wdt:P17 ?country. VALUES ?type { wd:Q5683226 wd:Q472983 wd:Q1983228 wd:Q1193633 wd:Q49343 wd:Q274880 } ?conflict wdt:P31 ?type. OPTIONAL { ?conflict wdt:P625 ?coords. } OPTIONAL { ?conflict wdt:P580 ?startDate. } OPTIONAL { ?conflict wdt:P582 ?endDate. } OPTIONAL { ?conflict wdt:P131 ?adminEntity. } OPTIONAL { ?wikipediaUrl schema:about ?conflict; schema:inLanguage "es"; schema:isPartOf <https://es.wikipedia.org/>. } SERVICE wikibase:label { bd:serviceParam wikibase:language "es,en". ?conflict rdfs:label ?conflictLabel; schema:description ?description. ?adminEntity rdfs:label ?adminEntityLabel. ?country rdfs:label ?countryLabel. } }`;
                    const url = `https://query.wikidata.org/sparql?query=${encodeURIComponent(sparqlQuery)}&format=json`;
                    try {
                        const response = await fetch(url, { headers: { 'Accept': 'application/json' } });
                        if (!response.ok) throw new Error(`Error de red: ${response.status}`);
                        const data = await response.json();
                        await processData(data);
                    } catch (error) {
                        console.error("Error fetching conflicts:", error);
                    } finally {
                        isLoading.value = false;
                    }
                };

                const processData = async (data) => {
                    const uniqueConflicts = new Map();
                     data.results.bindings.forEach(b => {
                         const id = b.conflict.value.split('/').pop();
                         if (!uniqueConflicts.has(id)) {
                             const conflict = { id, name: b.conflictLabel?.value || 'Sin nombre', description: b.description?.value || 'Sin descripci√≥n', startDate: b.startDate?.value, endDate: b.endDate?.value, region: b.adminEntityLabel?.value || 'No especificada', adminEntityId: b.adminEntity?.value.split('/').pop(), coords: null, isImprecise: false, wikipediaUrl: b.wikipediaUrl?.value, countryName: b.countryLabel?.value };
                             if (b.coords) { const match = b.coords.value.match(/Point\(([-\d.]+) ([-\d.]+)\)/); if (match) conflict.coords = [parseFloat(match[2]), parseFloat(match[1])]; }
                             conflict.status = determineStatus(conflict.startDate, conflict.endDate);
                             conflict.sector = getConflictSector(conflict);
                             uniqueConflicts.set(id, conflict);
                         }
                     });
                    const processedConflicts = Array.from(uniqueConflicts.values());

                    const conflictsToGeocode = processedConflicts.filter(c => !c.coords && c.adminEntityId);
                    if (conflictsToGeocode.length > 0) {
                        const adminCoordsMap = await geocodeAdminEntities(conflictsToGeocode);
                        processedConflicts.forEach(conflict => {
                            if (!conflict.coords && conflict.adminEntityId && adminCoordsMap.has(conflict.adminEntityId)) {
                                conflict.coords = adminCoordsMap.get(conflict.adminEntityId);
                                conflict.isImprecise = true;
                            }
                        });
                    }
                    allConflicts.value = processedConflicts;
                };

                const geocodeAdminEntities = async (conflicts) => {
                    const adminIds = [...new Set(conflicts.map(c => c.adminEntityId))];
                    if (adminIds.length === 0) return new Map();
                    const sparqlQuery = `SELECT ?entity ?coords WHERE { VALUES ?entity { ${adminIds.map(id => `wd:${id}`).join(' ')} } ?entity wdt:P625 ?coords. }`;
                    const url = `https://query.wikidata.org/sparql?query=${encodeURIComponent(sparqlQuery)}&format=json`;
                    const adminCoordsMap = new Map();
                    try {
                        const response = await fetch(url, { headers: { 'Accept': 'application/json' } });
                        if (!response.ok) return adminCoordsMap;
                        const data = await response.json();
                        data.results.bindings.forEach(b => {
                            const entityId = b.entity.value.split('/').pop();
                            const match = b.coords.value.match(/Point\(([-\d.]+) ([-\d.]+)\)/);
                            if(match) adminCoordsMap.set(entityId, [parseFloat(match[2]), parseFloat(match[1])]);
                        });
                    } catch (error) { console.error("Error geocoding:", error); }
                    return adminCoordsMap;
                };

                const onCountryChange = () => fetchData(filters.country);
                
                const showConflictDetails = async (conflict) => {
                    activeConflict.value = conflict;
                    if (['conflicto socioambiental', 'conflicto ambiental', 'sin descripci√≥n'].includes(conflict.description.toLowerCase().trim()) && conflict.wikipediaUrl) {
                        const summary = await fetchWikipediaSummary(conflict.wikipediaUrl);
                        if (summary && activeConflict.value?.id === conflict.id) {
                            activeConflict.value.description = summary;
                        }
                    }
                };

                const fetchWikipediaSummary = async (wikipediaUrl) => {
                    if (!wikipediaUrl) return null;
                    try {
                        const pageTitle = decodeURIComponent(wikipediaUrl.split('/').pop());
                        const apiUrl = `https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(pageTitle)}`;
                        const response = await fetch(apiUrl);
                        if (!response.ok) return null;
                        const data = await response.json();
                        return data.extract || null;
                    } catch { return null; }
                };
                const determineStatus = (startDateStr, endDateStr) => { const now = new Date(); if (endDateStr && new Date(endDateStr) < now) return 'Resuelto'; if (startDateStr) return new Date(startDateStr) < new Date(new Date().setFullYear(new Date().getFullYear() - 15)) ? 'Latente' : 'Activo'; return 'Desconocido'; };
                const getConflictSector = (conflict) => { const textToSearch = `${conflict.name.toLowerCase()} ${conflict.description.toLowerCase()}`; for (const [sector, keywords] of Object.entries(sectorKeywords)) { if (keywords.some(k => textToSearch.includes(k))) return sector; } return 'Otro'; };
                
                const getSectorColor = (sector) => sectorColors[sector] || '#607d8b';
                const getStatusInfo = (status) => statusInfo[status] || statusInfo['Desconocido'];
                const formatDate = (dateString) => dateString ? new Date(dateString).toLocaleDateString() : 'Desconocido';
                const openLink = (url) => { if(url) window.open(url, '_blank'); };

                const getCountryName = (id) => countries.value.find(c => c.id === id)?.name || id;
                const removeCountry = (id) => { filters.country = filters.country.filter(cId => cId !== id); };
                
                const toggleSelectAllCountries = () => {
                    if (filters.country.length === countries.value.length) {
                        filters.country = [];
                    } else {
                        filters.country = countries.value.map(c => c.id);
                    }
                };

                const nextStep = () => { if (tutorialStep.value < tutorialSteps.length - 1) tutorialStep.value++; };
                const prevStep = () => { if (tutorialStep.value > 0) tutorialStep.value--; };
                const finishTutorial = () => {
                    isTutorialActive.value = false;
                    showWelcomeModal.value = true;
                    localStorage.setItem('geoConflictosTutorialSeen', 'true');
                };
                const closeWelcomeModal = () => {
                    showWelcomeModal.value = false;
                };

                const updateTutorialHighlight = () => {
                    if (!isTutorialActive.value) return;
                    const step = currentTutorialStep.value;
                    const targetElement = document.querySelector(step.element);
                    if (!targetElement) return;

                    const rect = targetElement.getBoundingClientRect();
                    const padding = 10;
                    
                    tutorialHighlightStyle.value = {
                        top: `${rect.top - padding}px`,
                        left: `${rect.left - padding}px`,
                        width: `${rect.width + (padding * 2)}px`,
                        height: `${rect.height + (padding * 2)}px`,
                    };

                    tutorialPopupStyle.value = {
                        top: '50%',
                        left: '50%',
                        transform: 'translate(-50%, -50%)',
                    };
                };
                
                const handleClickOutside = (event) => {
                    if (countrySelectContainer.value && !countrySelectContainer.value.contains(event.target)) {
                        isCountryDropdownOpen.value = false;
                    }
                };
                
                const handleResize = () => {
                    if (isTutorialActive.value) {
                        updateTutorialHighlight();
                    }
                };

                onMounted(async () => {
                    map = L.map(mapContainer.value).setView([-40, -71], 4);
                    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { attribution: '&copy; OpenStreetMap' }).addTo(map);
                    markers = L.featureGroup().addTo(map);

                    const sparqlQuery = `SELECT DISTINCT ?country ?countryLabel WHERE { VALUES ?type { wd:Q5683226 wd:Q472983 } ?conflict wdt:P31 ?type; wdt:P17 ?country. SERVICE wikibase:label { bd:serviceParam wikibase:language "es,en". } } ORDER BY ?countryLabel`;
                    const url = `https://query.wikidata.org/sparql?query=${encodeURIComponent(sparqlQuery)}&format=json`;
                    try {
                        const response = await fetch(url, { headers: { 'Accept': 'application/json' } });
                        const data = await response.json();
                        countries.value = data.results.bindings.map(b => ({ id: b.country.value.split('/').pop(), name: b.countryLabel.value })).filter(c => c.name);
                        await fetchData(filters.country);
                    } catch (error) {
                         console.error("Error fetching countries:", error);
                    }
                    
                    document.addEventListener('click', handleClickOutside);
                    window.addEventListener('resize', handleResize);

                    if (localStorage.getItem('geoConflictosTutorialSeen') !== 'true') {
                        setTimeout(() => {
                            isTutorialActive.value = true;
                        }, 500);
                    }
                });
                
                onBeforeUnmount(() => {
                    document.removeEventListener('click', handleClickOutside);
                    window.removeEventListener('resize', handleResize);
                });

                watch(isTutorialActive, (isActive) => {
                    document.documentElement.classList.toggle('tutorial-active', isActive);
                    document.body.classList.toggle('tutorial-active', isActive);
                    if (isActive) {
                        nextTick(() => {
                            updateTutorialHighlight();
                        });
                    }
                });
                watch(tutorialStep, updateTutorialHighlight);

                watch(filteredConflicts, (newConflicts) => {
                    if (!map || !markers) return;
                    markers.clearLayers();
                    const conflictsWithCoords = newConflicts.filter(c => c.coords);

                    conflictsWithCoords.forEach(conflict => {
                        let markerStyle = `background-color: ${getSectorColor(conflict.sector)}; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 8px rgba(0,0,0,0.6);`;
                        if (conflict.isImprecise) {
                            markerStyle += ` border-style: dashed; opacity: 0.8;`;
                        }
                        const icon = L.divIcon({ className: 'custom-marker', html: `<div style="${markerStyle}"></div>`, iconSize:[24,24], iconAnchor:[12,12] });
                        
                        L.marker(conflict.coords, { icon: icon })
                            .addTo(markers)
                            .bindPopup(`<strong>${conflict.name}</strong><br><em>${conflict.sector}</em>`)
                            .on("click", () => showConflictDetails(conflict));
                    });

                    if (markers.getLayers().length > 0) {
                        map.invalidateSize();
                        if (filters.country.length === 1 && filters.country[0] === QID_CHILE) {
                             map.setView([-35.6751, -71.543], 5);
                        } else {
                             map.fitBounds(markers.getBounds(), { padding: [50, 50] });
                        }
                    } else {
                        map.setView([20,10], 2);
                    }
                });

                return {
                    isLoading, countries, filters, filteredConflicts, stats, filterOptions, activeConflict, mapContainer, onCountryChange, getSectorColor, getStatusInfo, formatDate, openLink, isCountryDropdownOpen, countrySearchTerm, filteredCountries, getCountryName, removeCountry, countrySelectContainer, isTutorialActive, tutorialStep, tutorialSteps, currentTutorialStep, nextStep, prevStep, finishTutorial, tutorialPopupStyle, tutorialHighlightStyle, showWelcomeModal, closeWelcomeModal, toggleSelectAllCountries, selectAllButtonText
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
